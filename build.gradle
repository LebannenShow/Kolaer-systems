group = "ru.kolaer"

allprojects {
    ext {
        pathToProjectDir = "D:\\KolAER-system"
        pathToProjectDirWithPlugins = pathToProjectDir + "\\plugins"
    }

    apply plugin: 'java'

    compileJava.options.encoding = 'UTF-8'
    sourceCompatibility = 1.8

    repositories {
        mavenCentral()
        jcenter()
        mavenLocal()
    }
}

subprojects {
    task wrapper(type: Wrapper) {
        gradleVersion = 1.11
    }
}

task makeProjectDirTask () {
    doLast {
        mkdir(pathToProjectDir)
        mkdir(pathToProjectDirWithPlugins)
    }
}

task makePretty(type: Delete) {
    delete pathToProjectDirWithPlugins, 'uglyFile'
}


task buildMainClient (dependsOn: ':client:usa:buildApp')
task buildPlugins (dependsOn: [':client:asmc:buildApp', ':client:admin:buildApp' ])
                               //':client:birthday:buildApp', ':client:browser:buildApp'] )
task buildClient (dependsOn: [buildMainClient, buildPlugins])

task buildKolaerSystem(dependsOn: [makePretty,makeProjectDirTask, buildClient])